<!DOCTYPE html><html lang=de> <head><title>CAN Bus</title><link rel=icon href=https://www.semiversus.com/favicon.ico><meta charset=utf-8><meta name=description content="Allgemeines CAN steht für Controller Area Network und ist ein serielles Feldbussystem. Die Entwicklung von CAN startete 1983 bei Bosch mit dem Ziel die Vernetzung der Steuergeräte in Fahrzeugen zu vereinfachen. CAN ist ein ISO Standard (11898) und findet weite Verwendung im Automobil sowie Automatisierungsbereich. Der CAN Standard ..."><meta name=author content="Günther Jena"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=google-site-verification content=O-3LVEziPiVrCYqFCwbLmB3s7lNG__cPMLLAr_RUxbA><meta name=msvalidate.01 content=70DFF0E672B42811AA384CC455C9406C><link rel=stylesheet href=https://www.semiversus.com/theme/css/semiversus.min.css?f7108c59><script async src=https://www.semiversus.com/theme/js/semiversus.min.js?c02fe949></script></head> <body data-spy=scroll data-target=#sidebar data-offset=30> <div id=wrap> <nav class="navbar navbar-inverse"> <div class=container> <div class=navbar-header> <button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=.navbar-collapse> <span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span> </button> <a href=https://www.semiversus.com/index.html class=navbar-brand>SEMIVERSUS</a> </div> <div class="navbar-collapse collapse"> <ul class="nav navbar-nav"> <li><a href=https://www.semiversus.com/index.html>Blog</a></li> <li><a href=https://www.semiversus.com/dic/uebersicht.html>Unterricht</a></li> <li><a href=https://www.semiversus.com/projekte/projekte.html>Projekte</a></li> <li><a href=https://www.semiversus.com/about.html>Über mich</a></li> </ul> <form class="navbar-form navbar-right" role=search action=https://www.semiversus.com/search.html onsubmit="return validateForm(this.elements['q'].value);"> <input type=text class=form-control placeholder=Suche name=q id=tipue_search_input></form> <ul class="nav navbar-nav navbar-right socialicons"> <li><a href=https://www.linkedin.com/in/guenther-jena data-toggle=tooltip data-placement=bottom title=LinkedIn.com/Günther-Jena><span class="linkedin icon hidden-xs"></span><span class="hidden-sm hidden-md hidden-lg">Linkedin</span></a></li> <li><a href=https://www.xing.com/profile/Guenther_Jena2 data-toggle=tooltip data-placement=bottom title=Xing.com/Günther-Jena><span class="xing icon hidden-xs"></span><span class="hidden-sm hidden-md hidden-lg">Xing</span></a></li> <li><a href=https://stackoverflow.com/users/166605/g%C3%BCnther-jena data-toggle=tooltip data-placement=bottom title=Stackoverflow.com/Semiversus><span class="stackoverflow icon hidden-xs"></span><span class="hidden-sm hidden-md hidden-lg">Stack Overflow</span></a></li> <li><a href=https://github.com/semiversus data-toggle=tooltip data-placement=bottom title=Github.com/Semiversus><span class="github icon hidden-xs"></span><span class="hidden-sm hidden-md hidden-lg">Github</span></a></li> <li><a href=https://www.semiversus.com/semiversus.atom.xml class=rss data-toggle=tooltip data-placement=bottom title="RSS Feed"><span class="rss icon hidden-xs"></span><span class="hidden-sm hidden-md hidden-lg">RSS Feed</span></a></li> </ul> </div> </div> </nav> <div class=container> <div class=visible-print-block>Semiversus | CAN Bus</div> <ol class="breadcrumb hidden-print"><li><a href=https://www.semiversus.com/dic/uebersicht.html>Unterrichtsmaterial</a></li><li><a href=https://www.semiversus.com/dic/bussysteme/uebersicht.html>Bussysteme</a></li><li><strong>CAN Bus</strong></li></ol> <div class=row> <div class=col-md-8 role=main> <header><h1>CAN Bus<div class="pull-right hidden-print"><a href=https://www.semiversus.com/dic/bussysteme/can.md class="btn btn-default btn-xs" data-toggle=tooltip data-placement=bottom title="Quelltext zu dieser Seite">Quelltext</a></div></h1></header> <h2 id=allgemeines>Allgemeines</h2> <p><strong>CAN</strong> steht f&uuml;r <em>Controller Area Network</em> und ist ein serielles Feldbussystem. Die Entwicklung von CAN startete 1983 bei Bosch mit dem Ziel die Vernetzung der Steuerger&auml;te in Fahrzeugen zu vereinfachen. CAN ist ein ISO Standard (11898) und findet weite Verwendung im Automobil sowie Automatisierungsbereich.</p> <p>Der CAN Standard definiert die beiden Schichten 1 und 2 des ISO/OSI Schichtenmodels (Bit&uuml;bertragungsschicht und Sicherungsschicht).</p> <h2 id=bitubertragungsschicht>Bit&uuml;bertragungsschicht</h2> <p>F&uuml;r die &Uuml;bertragung wird neben der gemeinsamen Masse ein differentielles Signal verwendet, welches &uuml;ber die beiden Signalpfade <samp>CAN+</samp> und <samp>CAN-</samp> (oft auch <samp>CAN_HIGH</samp> und <samp>CAN_LOW</samp> genannt).</p> <p>Der Bus arbeitet nach dem Multi-Master Prinzip, d.h. jede Komponente kann aktiv auf den Bus zugreifen. Ein <abbr title="Carrier Sense Multiple Access/Collision Resolution">CSMA/CR</abbr>-Verfahren stellt sicher, dass Nachrichten mit h&ouml;her Priorit&auml;t nicht durch gleichzeitig startende Nachrichten mit niedriger Priori&auml;t besch&auml;digt werden (siehe <a href=#arbitrierung>Arbitrierung</a>).</p> <p>Die beiden logischen Wert 0 und 1 werden mittels zweier Zust&auml;nde &uuml;bermittelt. Die logische 1 wird dabei <em>rezessiv</em> &uuml;bertragen, die logische 0 wird <em>dominant</em> &uuml;bertragen. Durch diese zwei Zust&auml;nde setzt sich am Bus eine logische 0 gegen&uuml;ber einer gleichzeitig anliegender logischen 1 durch.</p> <p>Ein wichtiges Grundprinzip von CAN ist, dass jeder aktive Sender w&auml;hrend der &Uuml;bertragung den Zustand des Busses &uuml;berwacht. Wenn der Bus einen anderen Zustand hat als der Sender selbst auf den Bus legt wird die &Uuml;bertragung abgebrochen.</p> <p>Je nach Leitungsl&auml;nge des Busses gibt es Limitierungen f&uuml;r die Datenrate:</p> <ul> <li>1MBit/s bis 40 Meter</li> <li>500kBit/s bis 100 Meter</li> <li>125kBits/s bis 500 Meter</li> </ul> <p>Als Busmedium wird meist ein Twister-Pair Kabel mit einem Wellenwiderstand von ungef&auml;hr 110 Ohm verwendet.</p> <h2 id=arbitrierung>Arbitrierung</h2> <p>Jedes Datentelegramm enth&auml;lt am Anfang des Packets eine 11 Bit Identifikationsnummer (direkt hinter einem <em>Start of Frame</em> Bit). Im CAN 2.0 B Standard wird dar&uuml;ber hinaus auch eine 29 Bit lange Identifikationsnummer definiert.</p> <p>Sobald ein Packet erfolgreich &uuml;bertragen wurde und der Bus damit frei ist hat jeder Sender die M&ouml;glichkeit ein Datentelegram zu schicken. &Uuml;bertragen mehrere Sender zeitgleich ein Packet wird mittels der <em>Arbitrierung</em> das Packet mit der h&ouml;chsten Priorit&auml;t ermittelt. Dazu &uuml;bertragen die Teilnehmer Bit f&uuml;r Bit der Identifikationsnummer, startend mit dem h&ouml;chstwertigsten. Wird ein logische 1 ausgesendet, eine logische 0 aber vom Bus zur&uuml;ckgelesen beendet der Teilnehmer die &Uuml;bertragung.</p> <p>Je niedriger die Identifikationsnummer, desto h&ouml;her die Priorit&auml;t. Ein Packet mit der ID 0 hat alle Bits auf logisch 0 und diese wird sich gegen alle anderen IDs durchsetzen.</p> <div class="panel panel-info"> <div class=panel-heading>Eindeutigkeit der ID</div> <div class=panel-body> <p>Identifikationsnummern identifizieren das Datentelegramm, nicht den Teilnehmer selbst! F&uuml;r ein CAN System muss sichergestellt werden, dass Identifikationsnummern eindeutig sind.</p> </div> </div> <h3 id=beispiel>Beispiel</h3> <p>Im folgenden Beispiel senden drei Teilnehmer ein Packet. Die Identifikationsnummern der Datentelegramme ist dabei:</p> <ul> <li><samp>0x125</samp> - Bin&auml;r <samp>001 0010 0101</samp></li> <li><samp>0x12A</samp> - Bin&auml;r <samp>001 0010 1010</samp></li> <li><samp>0x147</samp> - Bin&auml;r <samp>001 0100 0111</samp></li> </ul> <p><img alt="CAN Arbitrierung" src=https://www.semiversus.com/dic/bussysteme/can_arbitrierung.svg></p> <p>Als erstes scheidet ID 0x147 aus. Bei Bit <samp>ID6</samp> wird vom Teilnehmer eine logische 1 gesendet, am Bus hat sich aber die logische 0 der beiden anderen Teilnehmer durchgesetzt. Gleiches passiert bei ID 0x12A bei Bit <samp>ID3</samp>.</p> <h2 id=sicherungsschicht_1>Sicherungsschicht</h2> <p><figure><img src=https://www.semiversus.com/dic/bussysteme/can_telegramm.svg><figcaption>Aufbau eines CAN Telegramms im Base Frame Format (Bild: <a href=https://commons.wikimedia.org/wiki/File:CAN-Bus-frame_in_base_format_without_stuffbits.svg>Endres~commonswiki</a> CC BY-SA 3.0)</figcaption></figure></p> <p>Ein Datentelegramm beteht aus folgenden Feldern:</p> <ul> <li><strong>Start of Frame</strong> - markiert den Start eines Frames und ist logisch 0</li> <li><strong>Arbitration Field</strong> - &uuml;bertr&auml;gt die 11 Bit Identifikation und ein <strong>Remote Transmission Request</strong> Flag</li> <li><strong>Control</strong></li> <li><strong>ID Extension</strong> Bit - muss logisch 0 f&uuml;r eine 11 Bit Identifikation sein (logisch 1 bei 29 Bit) </li> <li><strong>Data Length</strong> - Anzahl an Datenbytes (0 bis 8)</li> <li><strong>Data</strong> - Datenbytes (im Bild wird ein Datenbyte &uuml;bertragen)</li> <li><strong>CRC Field</strong> - CRC Pr&uuml;fsumme</li> <li><strong>ACK Slot</strong> - wird vom Sender mit logisch 1 gesendet, ein Empf&auml;nger sendet bei Erfolg logisch 0</li> <li><strong>End of Frame</strong> - 7 rezessive Bits</li> </ul> <p>Der <strong>Remote Transmission Request</strong> (kurz RTR) ist eine M&ouml;glichkeit, von einem Teilnehmer Daten anzufordern. Dazu wird ein Telegramm mit der gew&uuml;nschten Identifikationsnummer und dem RTR Bit auf logisch 1 gesendet.</p> </div> <div class=col-md-4 role=complementary> <nav class="well well-sm" data-spy=affix data-offset-top=0 id=sidebar> <ul class=nav><li><a href=#allgemeines>Allgemeines</a></li><li><a href=#bitubertragungsschicht>Bit&uuml;bertragungsschicht</a></li><li><a href=#arbitrierung>Arbitrierung</a><ul class=nav><li><a href=#beispiel>Beispiel</a></li></ul></li><li><a href=#sicherungsschicht_1>Sicherungsschicht</a></li></ul> </nav> </div> </div> </div> </div> <footer class="footer hidden-print"><div class=container><p class="text-muted credit">Günther Jena 2011 - 2020 | Letztes Update am 20.9.2020 (Rev. <a href=https://github.com/semiversus/semiversus.github.io-source/commit/ffdbb85>ffdbb85</a>) <a href=https://plus.google.com/111972313670421914746/about rel=author class=hidden>Google+</a><a href=https://creativecommons.org/licenses/by-sa/3.0/de/ class=pull-right><img src=https://www.semiversus.com/theme/img/cc_by_sa.svg alt="Licence CC-BY-SA"></a></p></div></footer> <script type=text/javascript>
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.src = 'https:' == document.location.protocol ? 'https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML' : 'http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'; 
        s[(window.opera ? "innerHTML" : "text")] =
            "MathJax.Hub.Config({" + 
            "    config: ['MMLorHTML.js']," + 
            "    jax: ['input/TeX','input/MathML','output/HTML-CSS','output/NativeMML']," +
            "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," + 
            "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
            "    tex2jax: { " +
            "        inlineMath: [ ['%%','%%'] ], " +
            "        processEscapes: false }, " +
            "    'HTML-CSS': { " +
            "        styles: { '.MathJax .mo, .MathJax .mi': {color: 'black ! important'}} " +
            "    } " +
            "}); ";
        (document.body || document.getElementsByTagName('head')[0]).appendChild(s);
    </script> </body> </html>