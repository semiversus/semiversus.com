<!DOCTYPE html><html lang=de> <head><title>VHDL Test (2)</title><link rel=icon href=https://www.semiversus.com/favicon.ico><meta charset=utf-8><meta name=description content="Allgemeines Projektordner herunterladen und entpacken Insgesamt gibt es 29 Punkte Die einzelnen Punkte bauen meist nicht aufeinander auf. Statt langer Fehlersuche lieber auf das nächste Beispiel wechseln. Einschaltverzögerung Vorbereitung Projekt led_delay/led_delay.xise öffnen Aufgabenstellung Es ist eine einfache Einschaltverzögerung zu entwerfen. Diese Einschaltverzögerung steuert eine ..."><meta name=author content="Günther Jena"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=google-site-verification content=O-3LVEziPiVrCYqFCwbLmB3s7lNG__cPMLLAr_RUxbA><meta name=msvalidate.01 content=70DFF0E672B42811AA384CC455C9406C><link rel=stylesheet href=https://www.semiversus.com/theme/css/semiversus.min.css?f7108c59><script async src=https://www.semiversus.com/theme/js/semiversus.min.js?c02fe949></script></head> <body data-spy=scroll data-target=#sidebar data-offset=30> <div id=wrap> <nav class="navbar navbar-inverse"> <div class=container> <div class=navbar-header> <button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=.navbar-collapse> <span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span> </button> <a href=https://www.semiversus.com/index.html class=navbar-brand>SEMIVERSUS</a> </div> <div class="navbar-collapse collapse"> <ul class="nav navbar-nav"> <li><a href=https://www.semiversus.com/index.html>Blog</a></li> <li><a href=https://www.semiversus.com/dic/uebersicht.html>Unterricht</a></li> <li><a href=https://www.semiversus.com/projekte/projekte.html>Projekte</a></li> <li><a href=https://www.semiversus.com/about.html>Über mich</a></li> </ul> <form class="navbar-form navbar-right" role=search action=https://www.semiversus.com/search.html onsubmit="return validateForm(this.elements['q'].value);"> <input type=text class=form-control placeholder=Suche name=q id=tipue_search_input></form> <ul class="nav navbar-nav navbar-right socialicons"> <li><a href=https://www.linkedin.com/in/guenther-jena data-toggle=tooltip data-placement=bottom title=LinkedIn.com/Günther-Jena><span class="linkedin icon hidden-xs"></span><span class="hidden-sm hidden-md hidden-lg">Linkedin</span></a></li> <li><a href=https://www.xing.com/profile/Guenther_Jena2 data-toggle=tooltip data-placement=bottom title=Xing.com/Günther-Jena><span class="xing icon hidden-xs"></span><span class="hidden-sm hidden-md hidden-lg">Xing</span></a></li> <li><a href=https://stackoverflow.com/users/166605/g%C3%BCnther-jena data-toggle=tooltip data-placement=bottom title=Stackoverflow.com/Semiversus><span class="stackoverflow icon hidden-xs"></span><span class="hidden-sm hidden-md hidden-lg">Stack Overflow</span></a></li> <li><a href=https://github.com/semiversus data-toggle=tooltip data-placement=bottom title=Github.com/Semiversus><span class="github icon hidden-xs"></span><span class="hidden-sm hidden-md hidden-lg">Github</span></a></li> <li><a href=https://www.semiversus.com/semiversus.atom.xml class=rss data-toggle=tooltip data-placement=bottom title="RSS Feed"><span class="rss icon hidden-xs"></span><span class="hidden-sm hidden-md hidden-lg">RSS Feed</span></a></li> </ul> </div> </div> </nav> <div class=container> <div class=visible-print-block>Semiversus | VHDL Test (2)</div> <ol class="breadcrumb hidden-print"><li><a href=https://www.semiversus.com/dic/uebersicht.html>Unterrichtsmaterial</a></li><li><a href=https://www.semiversus.com/dic/programmierbare_logik/uebersicht.html>Programmierbare Logik</a></li><li><a href=https://www.semiversus.com/dic/programmierbare_logik/test_vhdl/uebersicht.html>Test - VHDL</a></li><li><strong>VHDL Test (2)</strong></li></ol> <div class=row> <div class=col-md-8 role=main> <header><h1>VHDL Test (2)<div class="pull-right hidden-print"><a href=https://www.semiversus.com/dic/programmierbare_logik/test_vhdl/test2.md class="btn btn-default btn-xs" data-toggle=tooltip data-placement=bottom title="Quelltext zu dieser Seite">Quelltext</a></div></h1></header> <h2 id=allgemeines>Allgemeines</h2> <ul> <li><a class=download href=https://www.semiversus.com/dic/programmierbare_logik/test_vhdl/vhdl_test_2.zip>Projektordner</a> herunterladen und entpacken</li> <li>Insgesamt gibt es <span class=badge>29 Punkte</span></li> <li>Die einzelnen Punkte bauen meist nicht aufeinander auf. Statt langer Fehlersuche lieber auf das n&auml;chste Beispiel wechseln.</li> </ul> <h2 id=einschaltverzogerung>Einschaltverz&ouml;gerung</h2> <h3 id=vorbereitung>Vorbereitung</h3> <ul> <li>Projekt <samp>led_delay/led_delay.xise</samp> &ouml;ffnen</li> </ul> <h3 id=aufgabenstellung>Aufgabenstellung</h3> <p>Es ist eine einfache Einschaltverz&ouml;gerung zu entwerfen. Diese Einschaltverz&ouml;gerung steuert eine LED an und wird mittels zwei Tasten bedient:</p> <ul> <li><code>button_toggle</code> - Schaltet das Licht ein bzw. aus</li> <li><code>button_on</code> - Schaltet das Licht in 3 Sekunden ein</li> </ul> <h3 id=entwurf-der-zustandsmaschine>Entwurf der Zustandsmaschine</h3> <p><span class=badge>5 Punkte</span></p> <p>Zur Realisierung wird eine Zustandsmaschine genutzt.</p> <ul> <li>Bearbeite die Datei <samp>led_delay_fsm.vhd</samp></li> <li>Definiere die drei Zust&auml;nden <code>OFF</code>, <code>LIGHT</code> und <code>DELAY</code></li> <li>Der Startzustand ist <code>OFF</code></li> <li>Der Eingang <code>toggle_i</code> wechselt von <code>LIGHT</code> nach <code>OFF</code> bzw. von <code>OFF</code> oder <code>DELAY</code> nach <code>LIGHT</code></li> <li>Der Eingang <code>on_i</code> wechselt von <code>OFF</code> nach <code>DELAY</code>, bei den anderen Zust&auml;nden hat er keine Auswirkung</li> <li>Der Eingang <code>timeout_i</code> bewirkt ein Wechsel von <code>DELAY</code> nach <code>LIGHT</code>, bei den anderen Zust&auml;nden hat er keine Auswirkung</li> <li>Der Ausgang <code>led_o</code> ist auf <code>'1'</code>, wenn die Zustandmaschine im Zustand <code>LIGHT</code> ist</li> <li>Der Ausgang <code>timer_enable_o</code> ist im Zustand <code>DELAY</code> auf <code>'1'</code>, ansonsten <code>'0'</code></li> <li>Der Ausgang <code>timer_clear_o</code> ist im Zustand <code>OFF</code> auf <code>'1'</code>, ansonsten <code>'0'</code></li> </ul> <p><img alt="FSM für Lichtsteuerung" src=https://www.semiversus.com/dic/programmierbare_logik/test_vhdl/test2_led_delay_fsm.svg></p> <div class="panel panel-info"> <div class=panel-heading>Testbench</div> <div class=panel-body> <p>Teste die Implementierung mittels der Testbench <samp>led_delay_fsm_tb.vhd</samp>. Mittels <kbd>F6</kbd> l&auml;sst sich der gesamte Bereich zoomen.</p> </div> </div> <h3 id=implementierung-des-top-levels>Implementierung des Top Levels</h3> <p><span class=badge>5 Punkte</span></p> <p>Zur Verf&uuml;gung stehen die Komponenten <samp>counter</samp>, <samp>button_dectect</samp> und <samp>led_delay_fsm</samp>. Diese Komponenten werden genutzt, um im Top Level <samp>led_delay.vhd</samp> die gew&uuml;nschte Funktionalit&auml;t zu realisieren.</p> <ul> <li>Die Instanz der Komponente <samp>button_detect</samp> mit dem Namen <code>toggle_detect_component</code> ist bereits erstellt<ul> <li><code>button_i</code> ist mit dem Eingang <code>button_toggle_i</code> verbunden</li> <li><code>detect_o</code> ist mit dem (bereits definiertem) Signal <code>toggle_detect</code> verbunden</li> </ul> </li> <li>Erstelle eine Instanz der Komponente <samp>button_detect</samp> mit dem Namen <code>on_detect_component</code> analog zu <code>toggle_detect_component</code><ul> <li><code>button_i</code> ist mit dem Eingang <code>button_on_i</code> verbunden</li> <li><code>detect_o</code> ist mit dem (bereits definiertem) Signal <code>on_detect</code> verbunden</li> </ul> </li> <li>Erstelle eine Instanz der Komponente <samp>led_delay_fsm</samp> mit dem Namen <code>led_delay_fsm_component</code><ul> <li><code>toggle_i</code> ist mit dem Signal <code>toggle_detect</code> verbunden</li> <li><code>on_i</code> ist mit dem Signal <code>on_detect</code> verbunden</li> <li><code>timeout_i</code> ist mit dem (bereits definiertem) Signal <code>timeout</code> verbunden</li> <li><code>led_o</code> ist mit dem Ausgang <code>led_o</code> verbunden</li> <li><code>timer_enable_o</code> ist mit dem (bereits definiertem) Signal <code>timer_enable</code> verbunden</li> <li><code>timer_clear_o</code> ist mit dem (bereits definiertem) Signal <code>timer_clear</code> verbunden</li> </ul> </li> <li>Erstelle eine Instanz der Komponente <samp>counter</samp> mit dem Namen <code>timeout_component</code><ul> <li><code>WIDTH</code> in der <em>generic map</em> wird auf 28 gestellt (28 Bit)</li> <li><code>MAXIMUM</code> wird auf <code>CLK_TIMEOUT_DIVIDER</code> gestellt (ist im <em>generic</em> Teil des Top Levels bereits definiert)</li> <li><code>enable_i</code> ist mit dem Signal <code>timer_enable</code> verbunden</li> <li><code>reset_i</code> ist mit dem Signal <code>timer_clear</code> verbunden</li> <li><code>value_o</code> ist nicht verbunden (<code>open</code>)</li> <li><code>overflow_o</code> ist mit dem Signal <code>timeout</code> verbunden</li> </ul> </li> <li>Jede Komponente hat einen Takteingang <code>clk</code>, welcher mit dem globalen <code>clk</code> verbunden wird</li> </ul> <div class="panel panel-info"> <div class=panel-heading>Testbench</div> <div class=panel-body> <p>Teste die Implementierung mittels der Testbench <samp>led_delay_tb.vhd</samp>.</p> </div> </div> <h3 id=erweiterung-der-constraints-datei>Erweiterung der <em>Constraints</em> Datei</h3> <p><span class=badge>2 Punkte</span></p> <p>In der Datei <samp>led_delay.ucf</samp> ist nur das Signal <code>clk</code> definiert. Erweitere die Datei um folgende Zuordnungen</p> <ul> <li><code>button_toggle_i</code> wird durch den Taster <samp>BTN0</samp> angesteuert</li> <li><code>button_on_i</code> wird durch den Taster <samp>BTN1</samp> angesteuert</li> <li><code>led_o</code> ist die LED <samp>LD0</samp></li> </ul> <figure><img src=https://www.semiversus.com/dic/programmierbare_logik/basys2_pinout.svg><figcaption>Pinout des BASYS2 Boards(Bild: <a href="http://www.digilentinc.com/Products/Detail.cfm?NavPath=2,400,790&Prod=BASYS2">Digilent Inc. BASYS2 Manual</a>)</figcaption></figure> <h3 id=test-am-board>Test am Board</h3> <p><span class=badge>1 Punkt</span></p> <p>Synthetisiere das Projekt und teste das Ergebnis am Board</p> <h2 id=wurfel_1>W&uuml;rfel</h2> <h3 id=vorbereitung_1>Vorbereitung</h3> <ul> <li>Projekt <samp>dice/dice.xise</samp> &ouml;ffnen</li> </ul> <h3 id=aufgabenstellung_1>Aufgabenstellung</h3> <p>Mittels sieben LEDs wird ein W&uuml;rfel dargestellt. Eine Taste startet durch das Dr&uuml;cken einen <em>Zufallsgenerator</em> und beim Loslassen wird das Ergebnis angezeigt. Dieser <em>Zufallsgenerator</em> ist ein Z&auml;hler, der mit 50Mhz die 6 m&ouml;glichen Zust&auml;nde durchwechselt.</p> <h3 id=decoder-testen>Decoder testen</h3> <p><span class=badge>5 Punkte</span></p> <p>Der Decoder wandelt den Eingang <code>value_i</code> (3 Bit) in die entsprechende 7 LEDs Darstellung <code>leds_o</code> (7 Bit) um. Dabei wird folgende kodierung verwendet:</p> <table> <thead> <tr> <th align=center>LED6</th> <th align=center>LED5</th> <th align=center>LED4</th> <th align=center>LED3</th> <th align=center>LED2</th> <th align=center>LED1</th> <th align=center>LED0</th> </tr> </thead> <tbody> <tr> <td align=center>Aus</td> <td align=center>Aus</td> <td align=center>Aus</td> <td align=center><strong>Ein</strong></td> <td align=center>Aus</td> <td align=center>Aus</td> <td align=center>Aus</td> </tr> <tr> <td align=center>Aus</td> <td align=center>Aus</td> <td align=center><strong>Ein</strong></td> <td align=center>Aus</td> <td align=center><strong>Ein</strong></td> <td align=center>Aus</td> <td align=center>Aus</td> </tr> <tr> <td align=center>Aus</td> <td align=center><strong>Ein</strong></td> <td align=center>Aus</td> <td align=center><strong>Ein</strong></td> <td align=center>Aus</td> <td align=center><strong>Ein</strong></td> <td align=center>Aus</td> </tr> <tr> <td align=center><strong>Ein</strong></td> <td align=center>Aus</td> <td align=center><strong>Ein</strong></td> <td align=center>Aus</td> <td align=center><strong>Ein</strong></td> <td align=center>Aus</td> <td align=center><strong>Ein</strong></td> </tr> <tr> <td align=center><strong>Ein</strong></td> <td align=center><strong>Ein</strong></td> <td align=center>Aus</td> <td align=center><strong>Ein</strong></td> <td align=center>Aus</td> <td align=center><strong>Ein</strong></td> <td align=center><strong>Ein</strong></td> </tr> <tr> <td align=center><strong>Ein</strong></td> <td align=center><strong>Ein</strong></td> <td align=center><strong>Ein</strong></td> <td align=center>Aus</td> <td align=center><strong>Ein</strong></td> <td align=center><strong>Ein</strong></td> <td align=center><strong>Ein</strong></td> </tr> </tbody> </table> <ul> <li>Die erste Zeile entspricht der Darstellung bei <code>value_i</code> gleich <code>"000"</code></li> <li><em>Ein</em> wird mittels <code>'1'</code> kodiert, <em>Aus</em> mittels <code>'0'</code></li> <li>Bei nicht definierten Zust&auml;nde sollen alle LEDs aus sein</li> </ul> <p>Die Komponente ist in vier Ausf&uuml;hrungen (<em>Architectures</em>) bereits in der Datei <samp>decoder.vhd</samp> beschrieben. Die <em>Architectures</em> lauten <code>behave1</code>, <code>behave2</code>, <code>behave3</code> und <code>behave4</code>.</p> <p>Erstelle in der Datei <samp>decoder_tb.vhd</samp> eine Testbench, die herausfindet, welche der vier Ausf&uuml;hrungen funktioniert (es ist genau eine).</p> <h3 id=komponente-shuffle>Komponente <code>shuffle</code></h3> <p><span class=badge>5 Punkte</span></p> <p>Erstelle die Komponente <code>shuffle</code> durch Bearbeitung der Datei <samp>shuffle.vhd</samp> nach folgender Skizze:</p> <p><img alt="Shuffle Komponente" src=https://www.semiversus.com/dic/programmierbare_logik/test_vhdl/test2_shuffle.jpg></p> <ul> <li>Wenn <code>enable_i</code> auf <code>'1'</code> ist, soll der interne Z&auml;hler <code>counter_reg</code> bei einer steigenden Taktflanke hinaufz&auml;hlen</li> <li>Der interne Z&auml;hler soll von 0 bis 5 z&auml;hlen</li> <li>Das Register <code>result_reg</code> &uuml;bernimmt bei einer steigenden Taktflanke den Wert von <code>counter_reg</code>, wenn <code>enable_i</code> gleich <code>'0'</code> ist</li> </ul> <div class="panel panel-info"> <div class=panel-heading>Testbench</div> <div class=panel-body> <p>Teste die Implementierung mittels der Testbench <samp>shuffle_tb.vhd</samp>.</p> </div> </div> <h3 id=implementierung-des-top-levels_1>Implementierung des Top Levels</h3> <p><span class=badge>5 Punkte</span></p> <p>Zur Verf&uuml;gung stehen die Komponenten <samp>shuffle</samp>, <samp>decoder</samp>. Diese Komponenten werden genutzt, um im Top Level <samp>dice.vhd</samp> die gew&uuml;nschte Funktionalit&auml;t zu realisieren.</p> <div class="panel panel-info"> <div class=panel-heading>Testbench</div> <div class=panel-body> <p>Teste die Implementierung mittels der Testbench <samp>dice_tb.vhd</samp>.</p> </div> </div> <h3 id=test-am-board_1>Test am Board</h3> <p><span class=badge>1 Punkt</span></p> <p>Synthetisiere das Projekt und teste das Ergebnis am Board</p> </div> <div class=col-md-4 role=complementary> <nav class="well well-sm" data-spy=affix data-offset-top=0 id=sidebar> <ul class=nav><li><a href=#allgemeines>Allgemeines</a></li><li><a href=#einschaltverzogerung>Einschaltverz&ouml;gerung</a><ul class=nav><li><a href=#vorbereitung>Vorbereitung</a></li><li><a href=#aufgabenstellung>Aufgabenstellung</a></li><li><a href=#entwurf-der-zustandsmaschine>Entwurf der Zustandsmaschine</a></li><li><a href=#implementierung-des-top-levels>Implementierung des Top Levels</a></li><li><a href=#erweiterung-der-constraints-datei>Erweiterung der Constraints Datei</a></li><li><a href=#test-am-board>Test am Board</a></li></ul></li><li><a href=#wurfel_1>W&uuml;rfel</a><ul class=nav><li><a href=#vorbereitung_1>Vorbereitung</a></li><li><a href=#aufgabenstellung_1>Aufgabenstellung</a></li><li><a href=#decoder-testen>Decoder testen</a></li><li><a href=#komponente-shuffle>Komponente shuffle</a></li><li><a href=#implementierung-des-top-levels_1>Implementierung des Top Levels</a></li><li><a href=#test-am-board_1>Test am Board</a></li></ul></li></ul> </nav> </div> </div> </div> </div> <footer class="footer hidden-print"><div class=container><p class="text-muted credit">Günther Jena 2011 - 2020 | Letztes Update am 20.9.2020 (Rev. <a href=https://github.com/semiversus/semiversus.github.io-source/commit/ffdbb85>ffdbb85</a>) <a href=https://plus.google.com/111972313670421914746/about rel=author class=hidden>Google+</a><a href=https://creativecommons.org/licenses/by-sa/3.0/de/ class=pull-right><img src=https://www.semiversus.com/theme/img/cc_by_sa.svg alt="Licence CC-BY-SA"></a></p></div></footer> <script type=text/javascript>
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.src = 'https:' == document.location.protocol ? 'https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML' : 'http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'; 
        s[(window.opera ? "innerHTML" : "text")] =
            "MathJax.Hub.Config({" + 
            "    config: ['MMLorHTML.js']," + 
            "    jax: ['input/TeX','input/MathML','output/HTML-CSS','output/NativeMML']," +
            "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," + 
            "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
            "    tex2jax: { " +
            "        inlineMath: [ ['%%','%%'] ], " +
            "        processEscapes: false }, " +
            "    'HTML-CSS': { " +
            "        styles: { '.MathJax .mo, .MathJax .mi': {color: 'black ! important'}} " +
            "    } " +
            "}); ";
        (document.body || document.getElementsByTagName('head')[0]).appendChild(s);
    </script> </body> </html>