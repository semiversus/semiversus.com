<!DOCTYPE html><html lang=de> <head><title>VHDL Übung 4 - Strukturelles Design</title><link rel=icon href=https://www.semiversus.com/favicon.ico><meta charset=utf-8><meta name=description content="Übungsaufgabe In dieser Übung wird das BASYS2 Board verwendet Für weitere Fragen zum Board bitte das Manual konsultieren. In dieser Übung wird die Unterteilung in mehrere Komponenten gezeigt. Vorbereitung Projektordner herunterladen und entpacken Projekt structural.xise öffnen Aufgabe 1 - Zeichne eine Schaltung für display.vhd In der Datei ..."><meta name=author content="Günther Jena"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=google-site-verification content=O-3LVEziPiVrCYqFCwbLmB3s7lNG__cPMLLAr_RUxbA><meta name=msvalidate.01 content=70DFF0E672B42811AA384CC455C9406C><link rel=stylesheet href=https://www.semiversus.com/theme/css/semiversus.min.css?f7108c59><script async src=https://www.semiversus.com/theme/js/semiversus.min.js?c02fe949></script></head> <body data-spy=scroll data-target=#sidebar data-offset=30> <div id=wrap> <nav class="navbar navbar-inverse"> <div class=container> <div class=navbar-header> <button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=.navbar-collapse> <span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span> </button> <a href=https://www.semiversus.com/index.html class=navbar-brand>SEMIVERSUS</a> </div> <div class="navbar-collapse collapse"> <ul class="nav navbar-nav"> <li><a href=https://www.semiversus.com/index.html>Blog</a></li> <li><a href=https://www.semiversus.com/dic/uebersicht.html>Unterricht</a></li> <li><a href=https://www.semiversus.com/projekte/projekte.html>Projekte</a></li> <li><a href=https://www.semiversus.com/about.html>Über mich</a></li> </ul> <form class="navbar-form navbar-right" role=search action=https://www.semiversus.com/search.html onsubmit="return validateForm(this.elements['q'].value);"> <input type=text class=form-control placeholder=Suche name=q id=tipue_search_input></form> <ul class="nav navbar-nav navbar-right socialicons"> <li><a href=https://www.linkedin.com/in/guenther-jena data-toggle=tooltip data-placement=bottom title=LinkedIn.com/Günther-Jena><span class="linkedin icon hidden-xs"></span><span class="hidden-sm hidden-md hidden-lg">Linkedin</span></a></li> <li><a href=https://www.xing.com/profile/Guenther_Jena2 data-toggle=tooltip data-placement=bottom title=Xing.com/Günther-Jena><span class="xing icon hidden-xs"></span><span class="hidden-sm hidden-md hidden-lg">Xing</span></a></li> <li><a href=https://stackoverflow.com/users/166605/g%C3%BCnther-jena data-toggle=tooltip data-placement=bottom title=Stackoverflow.com/Semiversus><span class="stackoverflow icon hidden-xs"></span><span class="hidden-sm hidden-md hidden-lg">Stack Overflow</span></a></li> <li><a href=https://github.com/semiversus data-toggle=tooltip data-placement=bottom title=Github.com/Semiversus><span class="github icon hidden-xs"></span><span class="hidden-sm hidden-md hidden-lg">Github</span></a></li> <li><a href=https://www.semiversus.com/semiversus.atom.xml class=rss data-toggle=tooltip data-placement=bottom title="RSS Feed"><span class="rss icon hidden-xs"></span><span class="hidden-sm hidden-md hidden-lg">RSS Feed</span></a></li> </ul> </div> </div> </nav> <div class=container> <div class=visible-print-block>Semiversus | VHDL Übung 4 - Strukturelles Design</div> <ol class="breadcrumb hidden-print"><li><a href=https://www.semiversus.com/dic/uebersicht.html>Unterrichtsmaterial</a></li><li><a href=https://www.semiversus.com/dic/programmierbare_logik/uebersicht.html>Programmierbare Logik</a></li><li><strong>VHDL Übung 4 - Strukturelles Design</strong></li></ol><nav class=hidden-print><ul class=pager> <li class=previous><a href=https://www.semiversus.com/dic/programmierbare_logik/uebung3.html>&larr; VHDL Übung 3 - Toggle</a></li><li class=next><a href=https://www.semiversus.com/dic/programmierbare_logik/uebung5.html>VHDL Übung 5 - Stoppuhr &rarr;</a></li></ul></nav> <div class=row> <div class=col-md-8 role=main> <header><h1>VHDL Übung 4 - Strukturelles Design<div class="pull-right hidden-print"><a href=https://www.semiversus.com/dic/programmierbare_logik/uebung4.md class="btn btn-default btn-xs" data-toggle=tooltip data-placement=bottom title="Quelltext zu dieser Seite">Quelltext</a></div></h1></header> <h2 id=ubungsaufgabe>&Uuml;bungsaufgabe</h2> <div class="panel panel-info"> <div class=panel-heading>In dieser &Uuml;bung wird das BASYS2 Board verwendet</div> <div class=panel-body> <p>F&uuml;r weitere Fragen zum Board bitte das <a class=download href=https://www.semiversus.com/dic/programmierbare_logik/basys2_manual.pdf>Manual</a> konsultieren.</p> </div> </div> <p>In dieser &Uuml;bung wird die Unterteilung in mehrere Komponenten gezeigt.</p> <h2 id=vorbereitung>Vorbereitung</h2> <ul> <li><a class=download href=https://www.semiversus.com/dic/programmierbare_logik/vhdl_uebung_4.zip>Projektordner</a> herunterladen und entpacken</li> <li>Projekt <code>structural.xise</code> &ouml;ffnen</li> </ul> <h2 id=aufgabe-1-zeichne-eine-schaltung-fur-displayvhd>Aufgabe 1 - Zeichne eine Schaltung f&uuml;r <code>display.vhd</code></h2> <p>In der Datei <code>display.vhd</code> werden die vier 7-Segment Anzeigen angesteuert. Dazu wird das Display mittels "Multiplex" angesteuert, sprich jeds einzelme 7-Segment Anzeige ist nur abwechselnd nur kurze Zeit aktiv. Durch den schnellen Wechsel bekommt das tr&auml;ge Auge des Menschen eine scheinbar "stehende" Anzeige zu sehen.</p> <h2 id=aufgabe-2-clk_divider>Aufgabe 2 - <code>CLK_DIVIDER</code></h2> <p><code>CLK_DIVIDER</code> ist ein <em>Generic</em> mit dem eine Komponente parametrisiert werden kann. Erweitere die Einbindung vom <code>display</code> in <code>structural.vhd</code> wie folgt:</p> <div class=codehilite><pre><span></span><span class=n>display_component</span><span class=o>:</span> <span class=k>entity</span> <span class=nc>work</span><span class=p>.</span><span class=n>display</span>
  <span class=k>generic</span> <span class=k>map</span> <span class=p>(</span>
    <span class=n>CLK_DIVIDER</span> <span class=o>=&gt;</span> <span class=mi>50000</span>
  <span class=p>)</span>
  <span class=k>port</span> <span class=k>map</span> <span class=p>(</span>
    <span class=n>digit0_i</span> <span class=o>=&gt;</span> <span class=s>"0011"</span><span class=p>,</span>
    <span class=n>digit1_i</span> <span class=o>=&gt;</span> <span class=s>"0010"</span><span class=p>,</span>
    <span class=n>digit2_i</span> <span class=o>=&gt;</span> <span class=s>"0001"</span><span class=p>,</span>
    <span class=n>digit3_i</span> <span class=o>=&gt;</span> <span class=s>"0000"</span><span class=p>,</span>
    <span class=n>clk</span> <span class=o>=&gt;</span> <span class=n>clk</span><span class=p>,</span>
    <span class=n>segments_o</span> <span class=o>=&gt;</span> <span class=n>segments_o</span><span class=p>,</span>
    <span class=n>an_o</span> <span class=o>=&gt;</span> <span class=n>an_o</span>
  <span class=p>);</span>
</pre></div> <p>Damit ist die Geschwindigkeit, in der die Anzeigen <em>gemultiplext</em> werden parametrisierbar. Was passiert, wenn <code>CLK_DIVIDER</code> die Werte 50 oder 1 zugewiesen wird? Was bei den Werten eine Million oder 50 Millionen?</p> <h2 id=aufgabe-3-implementierung-eines-16-bit-zahlers>Aufgabe 3 - Implementierung eines 16 Bit Z&auml;hlers</h2> <p>In der Datei <code>structural.vhd</code> soll ein 16 Bit Z&auml;hler implementiert werden, der mit 100 Hertz z&auml;hlt.</p> <p>Nutze dazu die signals <code>pre_counter_reg</code> als Vorteiler und <code>counter_reg</code> als 16 Bit Z&auml;hler. Die beiden Z&auml;hler k&ouml;nnen mittels zwei <code>process</code> Anweisungen implementiert werden oder auch beide gemeinsam in einer <code>process</code> Anweisung. Im folgenden Beispiel wird auch die Aufteilung des 16 Bit Z&auml;hlregisters auf die jeweils 4 Bit Eing&auml;nge <code>digit0_i</code> bis <code>digit3_i</code> gezeigt.</p> <div class=codehilite><pre><span></span><span class=k>architecture</span> <span class=nc>behave</span> <span class=k>of</span> <span class=nc>structural</span> <span class=k>is</span>
  <span class=k>signal</span> <span class=n>pre_counter_reg</span> <span class=o>:</span> <span class=kt>integer</span> <span class=k>range</span> <span class=mi>0</span> <span class=k>to</span> <span class=mi>500000</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=c1>-- 50Mhz/500.000=100Hz</span>
  <span class=k>signal</span> <span class=n>counter_reg</span> <span class=o>:</span> <span class=kt>unsigned</span><span class=p>(</span><span class=mi>15</span> <span class=k>downto</span> <span class=mi>0</span><span class=p>)</span> <span class=o>:=</span> <span class=p>(</span><span class=k>others</span> <span class=o>=&gt;</span> <span class=sc>'0'</span><span class=p>);</span>
<span class=k>begin</span>
  <span class=c1>--</span>
  <span class=c1>-- &lt; Hier &gt; Implementierung der Z&auml;hler</span>
  <span class=c1>---</span>

  <span class=n>display_component</span><span class=o>:</span> <span class=k>entity</span> <span class=nc>work</span><span class=p>.</span><span class=n>display</span>
    <span class=k>port</span> <span class=k>map</span> <span class=p>(</span>
      <span class=n>digit0_i</span> <span class=o>=&gt;</span> <span class=kt>std_ulogic_vector</span><span class=p>(</span><span class=n>counter_reg</span><span class=p>(</span><span class=mi>3</span> <span class=k>downto</span> <span class=mi>0</span><span class=p>)),</span>
      <span class=n>digit1_i</span> <span class=o>=&gt;</span> <span class=kt>std_ulogic_vector</span><span class=p>(</span><span class=n>counter_reg</span><span class=p>(</span><span class=mi>7</span> <span class=k>downto</span> <span class=mi>4</span><span class=p>)),</span>
      <span class=n>digit2_i</span> <span class=o>=&gt;</span> <span class=kt>std_ulogic_vector</span><span class=p>(</span><span class=n>counter_reg</span><span class=p>(</span><span class=mi>11</span> <span class=k>downto</span> <span class=mi>8</span><span class=p>)),</span>
      <span class=n>digit3_i</span> <span class=o>=&gt;</span> <span class=kt>std_ulogic_vector</span><span class=p>(</span><span class=n>counter_reg</span><span class=p>(</span><span class=mi>15</span> <span class=k>downto</span> <span class=mi>12</span><span class=p>)),</span>
      <span class=n>clk</span> <span class=o>=&gt;</span> <span class=n>clk</span><span class=p>,</span>
      <span class=n>segments_o</span> <span class=o>=&gt;</span> <span class=n>segments_o</span><span class=p>,</span>
      <span class=n>an_o</span> <span class=o>=&gt;</span> <span class=n>an_o</span>
    <span class=p>);</span>
<span class=k>end</span> <span class=k>architecture</span><span class=p>;</span>
</pre></div> <h2 id=aufgabe-4-rucksetzen-des-zahlers-mittels-button_i>Aufgabe 4 - R&uuml;cksetzen des Z&auml;hlers mittels <code>button_i</code></h2> <p>In der Toplevel-Entity ist ein Eingang <code>button_i</code> vorgesehen, der noch nicht verwendet wurde. Beim Dr&uuml;cken des Buttons soll der 16 Bit Z&auml;hler zur&uuml;ckgesetzt werden.</p> </div> <div class=col-md-4 role=complementary> <nav class="well well-sm" data-spy=affix data-offset-top=0 id=sidebar> <ul class=nav><li><a href=#ubungsaufgabe>&Uuml;bungsaufgabe</a></li><li><a href=#vorbereitung>Vorbereitung</a></li><li><a href=#aufgabe-1-zeichne-eine-schaltung-fur-displayvhd>Aufgabe 1 - Zeichne eine Schaltung f&uuml;r display.vhd</a></li><li><a href=#aufgabe-2-clk_divider>Aufgabe 2 - CLK_DIVIDER</a></li><li><a href=#aufgabe-3-implementierung-eines-16-bit-zahlers>Aufgabe 3 - Implementierung eines 16 Bit Z&auml;hlers</a></li><li><a href=#aufgabe-4-rucksetzen-des-zahlers-mittels-button_i>Aufgabe 4 - R&uuml;cksetzen des Z&auml;hlers mittels button_i</a></li></ul> </nav> </div> </div> </div> </div> <footer class="footer hidden-print"><div class=container><p class="text-muted credit">Günther Jena 2011 - 2020 | Letztes Update am 20.9.2020 (Rev. <a href=https://github.com/semiversus/semiversus.github.io-source/commit/ffdbb85>ffdbb85</a>) <a href=https://plus.google.com/111972313670421914746/about rel=author class=hidden>Google+</a><a href=https://creativecommons.org/licenses/by-sa/3.0/de/ class=pull-right><img src=https://www.semiversus.com/theme/img/cc_by_sa.svg alt="Licence CC-BY-SA"></a></p></div></footer> <script type=text/javascript>
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.src = 'https:' == document.location.protocol ? 'https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML' : 'http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'; 
        s[(window.opera ? "innerHTML" : "text")] =
            "MathJax.Hub.Config({" + 
            "    config: ['MMLorHTML.js']," + 
            "    jax: ['input/TeX','input/MathML','output/HTML-CSS','output/NativeMML']," +
            "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," + 
            "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
            "    tex2jax: { " +
            "        inlineMath: [ ['%%','%%'] ], " +
            "        processEscapes: false }, " +
            "    'HTML-CSS': { " +
            "        styles: { '.MathJax .mo, .MathJax .mi': {color: 'black ! important'}} " +
            "    } " +
            "}); ";
        (document.body || document.getElementsByTagName('head')[0]).appendChild(s);
    </script> </body> </html>